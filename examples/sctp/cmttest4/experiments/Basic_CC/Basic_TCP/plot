#!/bin/sh
# Martin Becke

if [ $# -ne 2 ] ; then
   echo >&2 "Usage: $0 [Vector File] [PDF file]"
   exit 1
fi


VECTOR_FILE="$1"
PDF_FILE="$2"


experiments/tools/extractvectors $VECTOR_FILE cc.data \
   -splitall \
    "[subflow][cwnd]" \
    "[subflow][measured RTT]" \
    "[subflow][RTO]" \
    || exit 1
R --vanilla <experiments/Basic_CC/Basic_TCP/plot-BasicTCP.R || exit 1

cp cc.pdf $PDF_FILE

#pdfmetadata cc.pdf cc.meta cc2.pdf || mv cc.pdf cc2.pdf
#pdfembedfonts cc2.pdf cc3.pdf -optimize || mv cc2.pdf cc3.pdf
#cp cc3.pdf $PDF_FILE
#\
#   "Congestion Window"    \
#   "Slow Start Threshold" \
#   "Fast Recovery State" \
#   "Sender Blocking Fraction" \
#   "Receiver Blocking Fraction" \
#   "Advertised Receiver Window" \
#   "Blocking TSNs Moved" \
#   "Partial Bytes Acked " \
#   "Number of Gap " \
#   "RTT" \
#   "RTO" \
#   "TSN " \
#   "Outstanding Bytes" \
#   "Queued Sent Bytes" \
#   "Queued Received Bytes" \